<launch>
  <!-- Load the environment -->
  <group ns="gazebo">
    <node name="spawn_table_urdf" pkg="gazebo_ros" type="spawn_model"
      args="-file $(find gerard_bauzil)/urdf/pedestal_table.urdf -urdf -model table" />
    <!-- xyzrpy of cobblestone on table: 0,0,1.167,0.2,1.52,0.2 -->
    <node name="spawn_cobblestone_urdf" pkg="gazebo_ros" type="spawn_model"
      args="-file $(find gerard_bauzil)/urdf/cobblestone.urdf -urdf -z 1.167 -pitch 1.52
      -model cobblestone" />
  </group>

  <!-- Which robot are we controlling ? -->
  <arg name="script_file" doc="Full path to the script which initialize the supervisor"
    default="$(find sot_hpp_demo)/talos/pickup_object/supervisor.py" />

  <include file="$(find talos_gazebo)/launch/talos_gazebo.launch" >
  </include>
  <include file="$(find roscontrol_sot_talos)/launch/sot_talos_controller_gazebo.launch" >
  </include>

  <group ns="hpp" >
    <node
      name="hpp_node" pkg="hpp_ros_interface" type="hpp_node.py"
      args="hpp-manipulation-server" respawn="true"
      output="screen" />
  </group>

  <group ns="sot_hpp" >
    <node name="path_execution_fsm" pkg="hpp_ros_interface"
      type="path_execution_fsm.py"
      output="screen" />
      <!--machine="controller"-->
    <node
      name="start_supervisor" pkg="sot_hpp"
      type="start_supervisor.py"
      output="screen"
      args="--input $(arg script_file) --prefix talos/ --simulate-torque-feedback"
      />
  </group>
</launch>
